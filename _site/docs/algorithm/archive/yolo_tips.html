<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(8)) > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(4) > ul > li:nth-child(8) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(4) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(4) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>YoloV5 Training Tips</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="YoloV5 Training Tips" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="http://localhost:4000/docs/algorithm/archive/yolo_tips.html" /> <meta property="og:url" content="http://localhost:4000/docs/algorithm/archive/yolo_tips.html" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="YoloV5 Training Tips" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","headline":"YoloV5 Training Tips","url":"http://localhost:4000/docs/algorithm/archive/yolo_tips.html"}</script> <!-- End Jekyll SEO tag --> <!-- Copied from https://katex.org/docs/browser.html#starter-template --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.css" integrity="sha384-Juol1FqnotbkyZUT5Z7gUPjQ9gzlwCENvUZTpQBAPxtusdwFLRy382PSDx5UUJ4/" crossorigin="anonymous"> <!-- The loading of KaTeX is deferred to speed up page rendering --> <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.js" integrity="sha384-97gW6UIJxnlKemYavrqDHSX3SiygeOwIZhwyOKRfSaf0JWKRVj9hLASHgFTzT+0O" crossorigin="anonymous"> </script> <!-- Automatically display code inside script tags with type=math/tex using KaTeX --> <script defer src="/just-the-docs-tests/assets/js/mathtex-script-type.js"> </script> <!-- To automatically render math in text elements, include the auto-render extension: --> <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body, { globalGroup: true, trust: true, strict: false, throwOnError: false, });"></script> <!-- The KaTeX default is 1.21em, see https://katex.org/docs/font.html#font-size-and-lengths --> <style> .katex { font-size: 1em; } </style> <script> MathJax = { tex: { inlineMath: [ ['$', '$'], ['\\(', '\\)'] ] }, svg: { fontCache: 'global' } }; </script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"> </script> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Welcome category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/" class="nav-list-link">Welcome</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Contributing to the Wiki category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/wiki-tutorial/tutorial.html" class="nav-list-link">Contributing to the Wiki</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Algorithm category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/algorithm/alg_team.html" class="nav-list-link">Algorithm</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in How Alg Team Operates category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/algorithm/operations/how_we_operate.html" class="nav-list-link">How Alg Team Operates</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/algorithm/operations/how_we_operate/feature_lifecycle.html" class="nav-list-link">How to Contribute Code</a> </li><li class="nav-list-item"> <a href="/docs/algorithm/operations/how_we_operate/testing_code.html" class="nav-list-link">How to Test Code</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Alg Team Documentation category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/algorithm/operations/documentation/documentation.html" class="nav-list-link">Alg Team Documentation</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/algorithm/operations/documentation/getting_started.html" class="nav-list-link">Getting Started</a> </li><li class="nav-list-item"> <a href="/docs/algorithm/operations/documentation/git.html" class="nav-list-link">Git</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Onboarding Process category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/algorithm/operations/onboarding.html" class="nav-list-link">Onboarding Process</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/algorithm/operations/onboarding/how_onboarding_works.html" class="nav-list-link">Get Started Here!</a> </li><li class="nav-list-item"> <a href="/docs/algorithm/operations/onboarding/cv_project.html" class="nav-list-link">Computer Vision Project</a> </li><li class="nav-list-item"> <a href="/docs/algorithm/operations/onboarding/ros2_project.html" class="nav-list-link">SWE/ROS2 Project</a> </li><li class="nav-list-item"> <a href="/docs/algorithm/operations/onboarding/ml_project.html" class="nav-list-link">ML Project</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Archived Pages category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/algorithm/archive/archive.html" class="nav-list-link">Archived Pages</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/algorithm/archive/annotation_format.html" class="nav-list-link">YoloV5 Annotation Forms</a> </li><li class="nav-list-item"> <a href="/docs/algorithm/archive/alg_projects.html" class="nav-list-link">Alg Team Project Starter Info</a> </li><li class="nav-list-item"> <a href="/docs/algorithm/archive/dataset.html" class="nav-list-link">A Good Dataset</a> </li><li class="nav-list-item"> <a href="/docs/algorithm/archive/depth.html" class="nav-list-link">Implementing Depth Estimation</a> </li><li class="nav-list-item"> <a href="/docs/algorithm/archive/repo.html" class="nav-list-link">Navigating the Repo</a> </li><li class="nav-list-item"> <a href="/docs/algorithm/archive/tx2.html" class="nav-list-link">NVIDIA TX2</a> </li><li class="nav-list-item"> <a href="/docs/algorithm/archive/yolo.html" class="nav-list-link">Using YoloV5</a> </li><li class="nav-list-item"> <a href="/docs/algorithm/archive/yolo_tips.html" class="nav-list-link">YoloV5 Training Tips</a> </li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Electrical category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/electrical/electrical.html" class="nav-list-link">Electrical</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Mechanical category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/mechanical/mechanical.html" class="nav-list-link">Mechanical</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/mechanical/infantry_robot.html" class="nav-list-link">Standard Robot</a></li><li class="nav-list-item"><a href="/docs/mechanical/design_library.html" class="nav-list-link">Design Library</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Control category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/control/README.html" class="nav-list-link">Control</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/control/Control%20-%20%20A%20General%20Guide.html" class="nav-list-link">General Guide</a></li><li class="nav-list-item"><a href="/docs/control/STM32%20Basics.html" class="nav-list-link">STM32 Basics</a></li><li class="nav-list-item"><a href="/docs/control/Important%20Theories.html" class="nav-list-link">Important Theories</a></li><li class="nav-list-item"><a href="/docs/control/Communication%20Prototols.html" class="nav-list-link">Communication Protocol</a></li><li class="nav-list-item"><a href="/docs/control/Useful%20Documents/Devices%20&%20Datasheets.html" class="nav-list-link">Devices & Datasheets</a></li><li class="nav-list-item"><a href="/docs/control/Useful%20Documents/Open-Source%20Control%20Code.html" class="nav-list-link">Open-Source Control Code</a></li><li class="nav-list-item"><a href="/docs/control/version-control.html" class="nav-list-link">Version Control</a></li><li class="nav-list-item"><a href="/docs/control/wheel_legged_state_space.html" class="nav-list-link">Wheel-Legged Balancing State Space</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Business category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/business/Business.html" class="nav-list-link">Business</a><ul class="nav-list"></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search" aria-label="Search" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/docs/algorithm/alg_team.html">Algorithm</a></li> <li class="breadcrumb-nav-list-item"><a href="/docs/algorithm/archive/archive.html">Archived Pages</a></li> <li class="breadcrumb-nav-list-item"><span>YoloV5 Training Tips</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="yolov5-training-tips"> <a href="#yolov5-training-tips" class="anchor-heading" aria-labelledby="yolov5-training-tips"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> YoloV5 Training Tips </h1> <p>By Tom O’Donnell (tkodonne@purdue.edu)</p><hr /> <p>If you’re working on the “Training YoloV5” onboarding project, odds are you’re going to get confused at one point or another. The instructions posted in the Discord server were intentionally left vague, as the goal is for you to understand for yourself what results in a good model.</p> <p>However, this has left people stuck, so I’ve written this starter pack to explain the components of training.</p> <p><strong>You do not need to understand all of this page, but parts of it will likely come in handy. Feel free to skim parts you don’t want to read.</strong></p> <p><strong>Yes, this is complicated, but it’s a chance to learn a new skill and insight into how our robot classification actually works.</strong></p> <h2 id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of Contents </h2> <ul> <li><a href="#what-comprises-a-dataset">What Comprises a Dataset?</a></li> <li><a href="#files-and-folder-layout">Files and Folder Layout</a></li> <li><a href="#how-to-train-yolo">How to Train Yolo</a></li> <li><a href="#evaluating-performance">Evaluating Model Performance</a></li> <li><a href="#summary">Summary and a step-by-step</a></li> </ul><hr /> <h2 id="what-comprises-a-dataset"> <a href="#what-comprises-a-dataset" class="anchor-heading" aria-labelledby="what-comprises-a-dataset"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What comprises a dataset? </h2> <h3 id="--images"> <a href="#--images" class="anchor-heading" aria-labelledby="--images"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> - Images </h3> <p>Many pictures containing the item you want to train to detect, the number / diversity of which depends on your needs.</p> <h3 id="--annotations"> <a href="#--annotations" class="anchor-heading" aria-labelledby="--annotations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> - Annotations </h3> <p>Text files describing where in the image your desired object appears. Every image you have in your dataset REQUIRES an individual annotation file, it’s how yolo can learn about your objects!</p> <p>Here’s an example of an annotation file:</p> <p><code class="language-plaintext highlighter-rouge">image_123.txt contents:</code></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5 0.209316 0.241667 0.116745 0.091667
4 0.715802 0.295833 0.073113 0.091667
</code></pre></div></div> <p>As such, each line of an annotation file follows the format:</p> <p><code class="language-plaintext highlighter-rouge">object_class</code> <code class="language-plaintext highlighter-rouge">x_center_object</code> <code class="language-plaintext highlighter-rouge">y_center_object</code> <code class="language-plaintext highlighter-rouge">bounding_box_width</code> <code class="language-plaintext highlighter-rouge">bounding_box_height</code></p> <p><strong>Fortunately, any dataset you find online at Roboflow or other sites will likely have annotation files already. If you’re gathering your own data from scratch, however, you will need to create these files yourself.</strong></p> <h3 id="--datayaml"> <a href="#--datayaml" class="anchor-heading" aria-labelledby="--datayaml"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> - data.yaml </h3> <p>This file tells yolo exactly where your images and annotation files are located, along with info on the types of objects you’re trying to train to detect. Again, datasets you find online will probably have this file already.</p><hr /> <h2 id="files-and-folder-layout"> <a href="#files-and-folder-layout" class="anchor-heading" aria-labelledby="files-and-folder-layout"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Files and Folder Layout </h2> <p><em>This is probably the part of this article you came here for.</em></p> <p>So you have images, you have annotation files, and you have your data.yaml`. What now?</p> <p>After setting up yolo, you should open the resulting yolov5 folder. Inside of it is a folder named <code class="language-plaintext highlighter-rouge">data</code>. Take your <code class="language-plaintext highlighter-rouge">data.yaml</code>and place it in here.</p> <p>You’ll also notice two folders called <code class="language-plaintext highlighter-rouge">images</code> and <code class="language-plaintext highlighter-rouge">labels</code>. Each one of these two folders is subdivided into three groups: <code class="language-plaintext highlighter-rouge">test</code>, <code class="language-plaintext highlighter-rouge">train</code>, and <code class="language-plaintext highlighter-rouge">val</code>, which I briefly described earlier. If you look at your downloaded dataset, it should also be divided into groups of the same names. So go ahead and place your <code class="language-plaintext highlighter-rouge">train</code> images into the <code class="language-plaintext highlighter-rouge">train</code> folder, <code class="language-plaintext highlighter-rouge">test</code> images into <code class="language-plaintext highlighter-rouge">test</code>, and <code class="language-plaintext highlighter-rouge">val</code> images into <code class="language-plaintext highlighter-rouge">val</code>.</p> <p>Similarly, go back up one directory, and place your <code class="language-plaintext highlighter-rouge">test</code>, <code class="language-plaintext highlighter-rouge">train</code>, and <code class="language-plaintext highlighter-rouge">val</code> annotation files into their respective folders in <code class="language-plaintext highlighter-rouge">labels</code>.</p> <p>In summary, all of these folders/files should be in your <code class="language-plaintext highlighter-rouge">yolov5/data</code> folder:</p> <ul> <li>data.yaml</li> <li>images/ <ul> <li>test/</li> <li>train/</li> <li>val/</li> </ul> </li> <li>labels/ <ul> <li>test/</li> <li>train/</li> <li>val/</li> </ul> </li> </ul> <p>And of course your test/tain/val images and labels are in the correct folders now.</p><hr /> <h2 id="how-to-train-yolo"> <a href="#how-to-train-yolo" class="anchor-heading" aria-labelledby="how-to-train-yolo"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to train yolo </h2> <ul> <li>Open a command prompt window inside <code class="language-plaintext highlighter-rouge">/yolov5</code>.</li> <li> <p>Customize and run this command depending on your PC and desired epochs:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python train.py --img &lt;image_size&gt; --cfg yolov5s.yaml --batch &lt;batches&gt; --epochs &lt;epochs&gt; --data` data.yaml --weights yolov5s.pt --workers &lt;workers&gt;
</code></pre></div> </div> <ul> <li>For example, you may run: <code class="language-plaintext highlighter-rouge">python train.py --img 848 --cfg yolov5s.yaml --batch 24 --epochs 40 --data data.yaml --weights yolov5s.pt --workers 12</code></li> </ul> </li> <li>You will probably run into some errors. If you’re running out of memory, decrease your batch size to start. Other issues are solvable with a simple google search usually.</li> </ul><hr /> <h2 id="evaluating-performance"> <a href="#evaluating-performance" class="anchor-heading" aria-labelledby="evaluating-performance"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Evaluating Performance </h2> <p>After training for your specified number of epochs, yolo will output a number of files and images into the<code class="language-plaintext highlighter-rouge">runs/train/expX</code> folder. The model resulting from training is saved into <code class="language-plaintext highlighter-rouge">weights</code>. You’ll notice there are actually TWO files, <code class="language-plaintext highlighter-rouge">best.pt</code> and <code class="language-plaintext highlighter-rouge">last.pt</code>.</p> <p><code class="language-plaintext highlighter-rouge">last.pt</code> saves your training results after the last epoch you trained on, and <code class="language-plaintext highlighter-rouge">best.pt</code> saves your <strong>best</strong> training results, which is actually quite cool.</p> <p>To actually see how your model performs, you’ll be most interested in viewing <code class="language-plaintext highlighter-rouge">results.csv</code>, and you may actually want to plot this data for easier viewing.</p> <p>You’ll want your loss to be as low as possible. Typically it’ll flatline, and when it starts to increase again that’s a good sign your training is done, or overfitting is starting to occur. mAP (mean average precision) is a metric combining the precision-recall curve into a single value representing the average of all precisions.</p> <p>This is the past of the onboarding project I left intentionally vague. Partially because learning this is not a one-size-fits-all approach, where you can definitely say training is done after <code class="language-plaintext highlighter-rouge">x</code> number of epochs or when your mAP hits a certain value.</p><hr /> <h1 id="summary"> <a href="#summary" class="anchor-heading" aria-labelledby="summary"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Summary </h1> <ul> <li>A dataset is made up of images, labels, and <code class="language-plaintext highlighter-rouge">data.yaml</code> describing where yolo can find those files.</li> <li>Images and labels are split up into <code class="language-plaintext highlighter-rouge">test</code>, <code class="language-plaintext highlighter-rouge">train</code>, and <code class="language-plaintext highlighter-rouge">val</code> subdivisions. You will place your images and labels in their respective subdivison folders, and <code class="language-plaintext highlighter-rouge">data.yaml</code> inside the <code class="language-plaintext highlighter-rouge">/yolov5/data/</code> folder prior to training.</li> <li>You need to customize your training command to your training goals and PC hardware.</li> <li>You can use <code class="language-plaintext highlighter-rouge">results.csv</code> to evaluate your model’s performance.</li> </ul> <p>If you want a step-by-step, here you go:</p> <ol> <li>Gather images and annotations</li> <li>Create <code class="language-plaintext highlighter-rouge">data.yaml</code></li> <li>Place <code class="language-plaintext highlighter-rouge">data.yaml</code> into <code class="language-plaintext highlighter-rouge">/yolov5/data/</code></li> <li>Place each subdivision of images into the respective folder inside <code class="language-plaintext highlighter-rouge">/yolov5/data/images/</code></li> <li>Place each subdivision of labels into the respective folder inside <code class="language-plaintext highlighter-rouge">/yolov5/data/labels/</code></li> <li>Customize your training command</li> <li>Train and wait several hours for it to complete</li> <li>Evalutate model performance</li> </ol> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
